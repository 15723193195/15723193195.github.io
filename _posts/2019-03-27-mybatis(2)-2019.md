---
layout:     post                    # 使用的布局（不需要改）
title:      mybatis(2)MyBatis-Statement方式的增删改查   # 标题 
subtitle:         					#副标题   
date:       2019-03-27               # 时间
author:     XHN                      # 作者
header-img: img/home-bg-o.jpg    #这篇文章标题背景图片
catalog: true                       # 是否归档
tags:                               #标签
    - mybatis
---



```xml
<mapper namespace="org.xhn.entity.userMapper">
    <insert id="addUser" parameterType="org.xhn.entity.User">
        insert into user(us_id, us_name, us_password) VALUE (#{us_id},#{us_name},#{us_password})
    </insert>

    <delete id="deleteUser" parameterType="int">
        delete from  user where us_id=#{us_id}
    </delete>
    <update id="updateUser" parameterType="org.xhn.entity.User">
        update user set us_name=#{us_name},us_password=#{us_password}  where us_id=#{us_id}
    </update>

    <select id="selectUserById" resultType="org.xhn.entity.User" parameterType="int">
        select * from user where us_id = #{us_id}
    </select>

    <select id="selectAll" resultType="org.xhn.entity.User">
        select * from user
    </select>
</mapper>
```

值得注意的是：
mybatis约定，每一个标签（insert、delete、update、select）之中，输入参数parameterType和输出参数resultType的个数都应该小于等于1个。

具体的来说：

parameterType:若参数值是简单类型（8个基本类型+String）,可以使用任何占位符（#{xxx}）.如果是对象类型，那么只能使用对象的属性。

resultType：若返回值是对象类型，无论返回一个或者多个对象，都只写成返回一个对象


```java
public class TestMybatis {
    public String addUser(User user) throws IOException {
        Reader reader = Resources.getResourceAsReader("conf.xml");
        SqlSessionFactory SessionFactory = new SqlSessionFactoryBuilder().build(reader);
        SqlSession session = SessionFactory.openSession();
        String statment = "org.xhn.entity.userMapper.addUser";
        int count = session.insert(statment, user);
        session.commit();
        return "插入" + count;
    }

    public String deleteUser(int id) throws IOException {
        Reader reader = Resources.getResourceAsReader("conf.xml");
        SqlSessionFactory SessionFactory = new SqlSessionFactoryBuilder().build(reader);
        SqlSession session = SessionFactory.openSession();
        String statment = "org.xhn.entity.userMapper.deleteUser";
        int count = session.delete(statment, id);
        session.commit();
        return "删除" + count;
    }

    public String updateUser(User user) throws IOException {
        Reader reader = Resources.getResourceAsReader("conf.xml");
        SqlSessionFactory SessionFactory = new SqlSessionFactoryBuilder().build(reader);
        SqlSession session = SessionFactory.openSession();
        String statment = "org.xhn.entity.userMapper.updateUser";
        int c = session.delete(statment, user);
        session.commit();
        return "修改" + c;
    }


    public String queryUser(int id) throws IOException {
        Reader reader = Resources.getResourceAsReader("conf.xml");
        SqlSessionFactory SessionFactory = new SqlSessionFactoryBuilder().build(reader);
        SqlSession session = SessionFactory.openSession();
        String statment = "org.xhn.entity.userMapper.selectUserById";
        User user = session.selectOne(statment, id);
		session.commit();
        return user.toString();
    }

    public List<User> queryAllUser() throws IOException {
        Reader reader = Resources.getResourceAsReader("conf.xml");
        SqlSessionFactory SessionFactory = new SqlSessionFactoryBuilder().build(reader);
        SqlSession session = SessionFactory.openSession();
        String statment = "org.xhn.entity.userMapper.selectAll";
        List<User> users = session.selectList(statment);
		session.commit();
        return users;
    }
}
```

